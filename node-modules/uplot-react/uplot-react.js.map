{"version":3,"sources":["webpack://UplotReact/webpack/universalModuleDefinition","webpack://UplotReact/webpack/bootstrap","webpack://UplotReact/./common/index.ts","webpack://UplotReact/./react/uplot-react.tsx","webpack://UplotReact/external {\"amd\":\"react\",\"commonjs\":\"react\",\"commonjs2\":\"react\",\"root\":\"React\"}","webpack://UplotReact/external {\"amd\":\"uplot\",\"commonjs\":\"uplot\",\"commonjs2\":\"uplot\",\"root\":\"uPlot\"}"],"names":[],"mappings":"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","file":"uplot-react.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"), require(\"uplot\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"react\", \"uplot\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"UplotReact\"] = factory(require(\"react\"), require(\"uplot\"));\n\telse\n\t\troot[\"UplotReact\"] = factory(root[\"React\"], root[\"uPlot\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_react__, __WEBPACK_EXTERNAL_MODULE_uplot__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./react/uplot-react.tsx\");\n","import uPlot from 'uplot';\n\ntype OptionsUpdateState = 'keep' | 'update' | 'create';\n\n// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is\nif (!Object.is) {\n    // eslint-disable-next-line\n    Object.defineProperty(Object, \"is\", {value: (x: any, y: any) =>\n        (x === y && (x !== 0 || 1 / x === 1 / y)) || (x !== x && y !== y)\n    });\n}\n\nexport const optionsUpdateState = (_lhs: uPlot.Options, _rhs: uPlot.Options): OptionsUpdateState => {\n    const {width: lhsWidth, height: lhsHeight, ...lhs} = _lhs;\n    const {width: rhsWidth, height: rhsHeight, ...rhs} = _rhs;\n\n    let state: OptionsUpdateState = 'keep';\n    if (lhsHeight !== rhsHeight || lhsWidth !== rhsWidth) {\n        state = 'update';\n    }\n    if (Object.keys(lhs).length !== Object.keys(rhs).length) {\n        return 'create';\n    }\n    for (const k of Object.keys(lhs)) {\n        if (!Object.is(lhs[k], rhs[k])) {\n            state = 'create';\n            break;\n        }\n    }\n    return state;\n}\n\nexport const dataMatch = (lhs: uPlot.AlignedData, rhs: uPlot.AlignedData): boolean => {\n    if (lhs.length !== rhs.length) {\n        return false;\n    }\n    return lhs.every((lhsOneSeries, seriesIdx) => {\n        const rhsOneSeries = rhs[seriesIdx];\n        if (lhsOneSeries.length !== rhsOneSeries.length) {\n            return false;\n        }\n        return lhsOneSeries.every((value, valueIdx) => value === rhsOneSeries[valueIdx]);\n    });\n}\n","import React, {useEffect, useRef} from 'react';\n\nimport uPlot from 'uplot';\n\nimport {optionsUpdateState, dataMatch} from 'uplot-wrappers-common';\n\nexport default function UplotReact({options, data, target, onDelete = () => {}, onCreate = () => {}}: {\n    options: uPlot.Options,\n    data: uPlot.AlignedData,\n    // eslint-disable-next-line\n    target?: HTMLElement | ((self: uPlot, init: Function) => void),\n    onDelete?: (chart: uPlot) => void\n    onCreate?: (chart: uPlot) => void\n}): JSX.Element | null {\n    const chartRef = useRef<uPlot | null>(null);\n    const targetRef = useRef<HTMLDivElement>(null);\n\n    function destroy(chart: uPlot | null) {\n        if (chart) {\n            onDelete(chart);\n            chart.destroy();\n            chartRef.current = null;\n        }\n    }\n    function create() {\n        const newChart = new uPlot(options, data, target || targetRef.current as HTMLDivElement)\n        chartRef.current = newChart;\n        onCreate(newChart);\n    }\n    // componentDidMount + componentWillUnmount\n    useEffect(() => {\n        create();\n        return () => {\n            destroy(chartRef.current);\n        }\n    }, []);\n    // componentDidUpdate\n    const prevProps = useRef({options, data, target}).current;\n    useEffect(() => {\n        const chart = chartRef.current;\n        if (prevProps.options !== options) {\n            const optionsState = optionsUpdateState(prevProps.options, options);\n            if (!chart || optionsState === 'create') {\n                destroy(chart);\n                create();\n            } else if (optionsState === 'update') {\n                chart.setSize({width: options.width, height: options.height});\n            }\n        }\n        if (prevProps.data !== data) {\n            if (!chart) {\n                create();\n            } else if (!dataMatch(prevProps.data, data)) {\n                chart.setData(data);\n            }\n        }\n        if (prevProps.target !== target) {\n            destroy(chart);\n            create();\n        }\n\n        return () => {\n            prevProps.options = options;\n            prevProps.data = data;\n            prevProps.target = target;\n        };\n    }, [options, data, target]);\n\n    return target ? null : <div ref={targetRef}></div>;\n}\n","module.exports = __WEBPACK_EXTERNAL_MODULE_react__;","module.exports = __WEBPACK_EXTERNAL_MODULE_uplot__;"],"sourceRoot":""}